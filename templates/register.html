{% extends 'base.html' %}

{% block title %}Register ‚Äî Global Sant√©{% endblock %}

{% block body_class %}gs-auth-body{% endblock %}

{% block navbar %}{% endblock %}

{% block content %}
<div class="gs-auth-shell">
  <div class="gs-auth-card gs-auth-card-anim">
    <div class="gs-auth-left">
      <div>
        <div class="gs-auth-title gs-auth-anim" style="--d: 0;">Create your account</div>
        <div class="gs-auth-subtitle gs-auth-anim" style="--d: 1;">
          Start tracking your mood, stress, sleep, and reflections.
        </div>

        <form class="mt-4" method="post" action="{{ url_for('register_post') }}">
          <div class="mb-3 gs-auth-anim" style="--d: 2;">
            <input class="form-control gs-auth-input" type="email" id="email" name="email" required placeholder="Email" />
          </div>

          <div class="mb-3 gs-auth-anim" style="--d: 3;">
            <input
              class="form-control gs-auth-input"
              type="text"
              id="username"
              name="username"
              required
              placeholder="Username"
            />
          </div>

          <div class="mb-3 position-relative gs-auth-anim" style="--d: 4;">
            <input
              class="form-control gs-auth-input"
              type="password"
              id="password"
              name="password"
              minlength="6"
              required
              placeholder="Password"
            />
            <button class="gs-auth-eye" type="button" data-toggle-password="#password" aria-label="Toggle password">
              üëÅ
            </button>
          </div>

          <button class="btn gs-auth-login w-100 gs-auth-anim" style="--d: 5;" type="submit">Register</button>

          <div class="gs-auth-footer gs-auth-anim" style="--d: 6;">
            Already have an account?
            <a class="gs-auth-link-strong" href="{{ url_for('login') }}">Sign in</a>
          </div>

          <div class="gs-auth-footer gs-auth-anim" style="--d: 7; opacity: 0.85;">
            The first registered user becomes admin automatically.
          </div>
        </form>
      </div>
    </div>

    <div class="gs-auth-right gs-auth-right-anim">
      <div class="gs-auth-illustration">
        <img
          src="https://images.unsplash.com/photo-1527137342181-19aab11a8ee8?auto=format&fit=crop&w=1400&q=80"
          alt="A calm journaling scene"
        />
      </div>
      <div class="gs-auth-right-text">A gentle space to check in with yourself</div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  <script>
    document.querySelectorAll('[data-toggle-password]').forEach((btn) => {
      btn.addEventListener('click', () => {
        const sel = btn.getAttribute('data-toggle-password');
        const input = document.querySelector(sel);
        if (!input) return;
        input.type = input.type === 'password' ? 'text' : 'password';
      });
    });
  </script>
{% endblock %}
